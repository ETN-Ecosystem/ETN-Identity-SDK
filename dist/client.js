var ETNAuthClient = /** @class */ (function () {
    function ETNAuthClient(config) {
        this.clientId = config.clientId;
        this.redirectUri = config.redirectUri;
        this.scope = config.scope || 'openid profile offline_access'; // Default scopes (offline_access for refresh tokens)
    }
    /**
     * Constructs the OIDC Authorization URL for the "Sign in with ETN" flow.
     *
     * @param state - A random string generated by the app to prevent CSRF.
     * @returns The fully constructed URL to redirect the user to.
     */
    ETNAuthClient.prototype.buildAuthorizeUrl = function (state) {
        var params = new URLSearchParams({
            client_id: this.clientId,
            redirect_uri: this.redirectUri,
            response_type: 'code',
            scope: this.scope,
            response_mode: 'query', // Force GET redirect to avoid POST loops
        });
        if (state) {
            params.append('state', state);
        }
        else {
            // Best practice: warn if no state is provided, though we allow it for simple scaffolding
            console.warn('ETNAuthClient: No state parameter provided. This is recommended for security.');
        }
        return "".concat(ETNAuthClient.ENDPOINTS.AUTHORIZE, "?").concat(params.toString());
    };
    // Endpoints defined by technical specs
    ETNAuthClient.ENDPOINTS = {
        AUTHORIZE: 'https://account.etnecosystem.org/authorize',
        TOKEN: 'https://auth.etnecosystem.org/api/v1/oauth/token',
        USERINFO: 'https://auth.etnecosystem.org/api/v1/oauth/userinfo',
    };
    return ETNAuthClient;
}());
export { ETNAuthClient };
